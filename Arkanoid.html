<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <title>Arkanoid</title>
</head>
<body>      
<script type="text/javascript" src="keys.js"></script>
<script type="text/javascript" src="engine.js"></script> 
<script type="text/javascript" src="graph.js"></script> 
<script type="text/javascript" src="player.js"></script> 
<script type="text/javascript" src="grid.js"></script>
<script type="text/javascript" src="ball.js"></script>

<canvas style="position: absolute; top: 0px; left: 0px" id="canvas" width="640" height="480"></canvas>
<div style="position: absolute; top: 10px; left: 10px">

Счет игрока: <b id="score">0</b></br>
Мячи: <b id="hp">3</b>

</div>

<script type="text/javascript">
init();

var map = {
  color : '#c75252',
  width : 40,
  height : 20,
  offset : 5,

  tiles : [
    [1, 0, 1, 1, 1, 0, 1, 1, 1],
    [1, 1, 0, 1, 1, 0, 1, 1, 1],
    [1, 1, 1, 0, 1, 0, 1, 1, 1],
    [0, 0, 0, 0, 0, 0, 1, 1, 1],
    [1, 1, 1, 0, 1, 0, 1, 1, 1],
    [1, 1, 0, 1, 1, 0, 1, 1, 1],
    [1, 0, 1, 1, 1, 0, 1, 1, 1],
    [0, 1, 1, 1, 1, 0, 1, 1, 1],       
  ]
};


grid.create(map);

//grid.generate(5, 60, 30, 'green');
player.init(width / 2, 200, 'blue');
ball.init(player.x + Math.ceil(player.width / 2), player.y - 5, 5, 'blue');


var game = function () {
  fillAll('#ADD8E6');
  grid.draw();

  ball.collision()
  ball.move();
  ball.draw();

  player.move();
  player.draw();
  player.collision();
};

var menu = function () {
  fillAll('#ADD8E6');

  grid.draw();
  ball.draw();
  player.draw();

  if (isAnyKeyDown()) {
    setGame(game);
  }
}

startGame(menu)     
</script>
</body>
</html>